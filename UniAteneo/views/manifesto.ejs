<%- include('navbar.ejs') %>
  <div class="container text-center pt-3">
    <div class="shadow p-3 mb-5 bg-body rounded">
      <h2>Insegnamenti primo anno</h2>
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">ID Materia</th>
            <th scope="col">SSD</th>
            <th scope="col">Denominazione</th>
            <th scope="col">CFU</th>
            <th scope="col">Docente</th>
            <th scope="col">A scelta</th>
            <th scope="col">N. gruppo</th>
            <th scope="col">Scheda di Trasparenza</th>
          </tr>
        </thead>
        <tbody>
          <% rows.forEach((row)=> { %>
            <% if (row.anno !=1) return; %>
              <tr>
                <td>
                  <%= row.id_insegnamento %>
                </td>
                <td>
                  <%= row.ssd %>
                </td>
                <td>
                  <%= row.nome_insegnamento %>
                </td>
                <td>
                  <%= row.cfu %>
                </td>
                <td>
                  <% var nome = row.nome_insegnamento.toUpperCase() 
                    if (nome !=='TESI' && nome !=='PROVA FINALE' && nome
                    !=='TIROCINIO' ) { var index=docenti.map(doc=> {return doc.id}).indexOf(row.id_docente);
                    if(index != -1) { %> <%= docenti[index].nome + " " + docenti[index].cognome %>
                      <% } } %>
                </td>
                <td>
                  <%if (row.scelta) {%> Si <% } else {%> No <%}%>
                </td>
                <td>
                  <%if (row.scelta) {%>
                    <%=row.blocco%>
                      <% } %>
                </td>
                <td> <button class="btn">Scheda di Trasparenza</button> </td>
              </tr>

              <% }) %>
        </tbody>
        <tfoot>
          <tr class="table-dark"></tr>
        </tfoot>
      </table>

      <h2>Insegnamenti secondo anno</h2>
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">ID Materia</th>
            <th scope="col">SSD</th>
            <th scope="col">Denominazione</th>
            <th scope="col">CFU</th>
            <th scope="col">Docente</th>
            <th scope="col">A scelta</th>
            <th scope="col">N. gruppo</th>
            <th scope="col">Scheda di Trasparenza</th>
          </tr>
        </thead>
        <tbody>
          <% rows.forEach((row)=> { %>
            <% if (row.anno !=2) return; %>
              <tr>
                <td>
                  <%= row.id_insegnamento %>
                </td>
                <td>
                  <%= row.ssd %>
                </td>
                <td>
                  <%= row.nome_insegnamento %>
                </td>
                <td>
                  <%= row.cfu %>
                </td>
                <td>
                  <% var nome=row.nome_insegnamento.toUpperCase() 
                    if (nome !=='TESI' && nome !=='PROVA FINALE' && nome
                    !=='TIROCINIO' ) { var index=docenti.map(doc=> {return doc.id}).indexOf(row.id_docente);
                    if(index != -1) { %> <%= docenti[index].nome + " " + docenti[index].cognome %>
                      <% } } %>
                </td>
                <td>
                  <%if (row.scelta) {%> Si <% } else {%> No <%}%>
                </td>
                <td>
                  <%if (row.scelta) {%>
                    <%=row.blocco%>
                      <% } %>
                </td>
                <td> <button class="btn">Scheda di Trasparenza</button> </td>
              </tr>

              <% }) %>
        </tbody>
        <tfoot>
          <tr class="table-dark"></tr>
        </tfoot>
      </table>

      <% if(rows[0].tipo_cds !=='LM' ) { %>
        <h2>Insegnamenti terzo anno</h2>
        <table class="table table-hover">
          <thead>
            <tr>
              <th scope="col">ID Materia</th>
              <th scope="col">SSD</th>
              <th scope="col">Denominazione</th>
              <th scope="col">CFU</th>
              <th scope="col">Docente</th>
              <th scope="col">A scelta</th>
              <th scope="col">N. gruppo</th>
              <th scope="col">Scheda di Trasparenza</th>
            </tr>
          </thead>
          <tbody>
            <% rows.forEach((row)=> { %>
              <% if (row.anno !=3) return; %>
                <tr>
                  <td>
                    <%= row.id_insegnamento %>
                  </td>
                  <td>
                    <%= row.ssd %>
                  </td>
                  <td>
                    <%= row.nome_insegnamento %>
                  </td>
                  <td>
                    <%= row.cfu %>
                  </td>
                  <td>
                    <% var nome=row.nome_insegnamento.toUpperCase() 
                    if (nome !=='TESI' && nome !=='PROVA FINALE' && nome
                      !=='TIROCINIO' ) { var index=docenti.map(doc=> {return doc.id}).indexOf(row.id_docente);
                      if(index != -1) { %> <%= docenti[index].nome + " " + docenti[index].cognome %>
                        <% } } %>
                  </td>
                  <td>
                    <%if (row.scelta) {%> Si <% } else {%> No <%}%>
                  </td>
                  <td>
                    <%if (row.scelta) {%>
                      <%=row.blocco%>
                        <% } %>
                  </td>
                  <td> <button class="btn">Scheda di Trasparenza</button> </td>
                </tr>

                <% }) %>
          </tbody>
          <tfoot>
            <tr class="table-dark"></tr>
          </tfoot>
        </table>
        <% if(rows[0].tipo_cds !=='LT' ) {%>
          <h2>Insegnamenti quarto anno</h2>
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">ID Materia</th>
                <th scope="col">SSD</th>
                <th scope="col">Denominazione</th>
                <th scope="col">CFU</th>
                <th scope="col">Docente</th>
                <th scope="col">A scelta</th>
                <th scope="col">N. gruppo</th>
                <th scope="col">Scheda di Trasparenza</th>
              </tr>
            </thead>
            <tbody>
              <% rows.forEach((row)=> { %>
                <% if (row.anno !=4) return; %>
                  <tr>
                    <td>
                      <%= row.id_insegnamento %>
                    </td>
                    <td>
                      <%= row.ssd %>
                    </td>
                    <td>
                      <%= row.nome_insegnamento %>
                    </td>
                    <td>
                      <%= row.cfu %>
                    </td>
                    <td>
                      <% var nome=row.nome_insegnamento.toUpperCase() 
                      if (nome !=='TESI' && nome !=='PROVA FINALE' &&
                        nome !=='TIROCINIO' ) { var index=docenti.map(doc=> {return doc.id}).indexOf(row.id_docente);
                        if(index != -1) { %> <%= docenti[index].nome + " " + docenti[index].cognome %>
                          <% } } %>
                    </td>
                    <td>
                      <%if (row.scelta) {%> Si <% } else {%> No <%}%>
                    </td>
                    <td>
                      <%if (row.scelta) {%>
                        <%=row.blocco%>
                          <% } %>
                    </td>
                    <td> <button class="btn">Scheda di Trasparenza</button> </td>
                  </tr>

                  <% }) %>
            </tbody>
            <tfoot>
              <tr class="table-dark"></tr>
            </tfoot>
          </table>
          <h2>Insegnamenti quinto anno</h2>
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">ID Materia</th>
                <th scope="col">SSD</th>
                <th scope="col">Denominazione</th>
                <th scope="col">CFU</th>
                <th scope="col">Docente</th>
                <th scope="col">A scelta</th>
                <th scope="col">N. gruppo</th>
                <th scope="col">Scheda di Trasparenza</th>
              </tr>
            </thead>
            <tbody>
              <% rows.forEach((row)=> { %>
                <% if (row.anno !=5) return; %>
                  <tr>
                    <td>
                      <%= row.id_insegnamento %>
                    </td>
                    <td>
                      <%= row.ssd %>
                    </td>
                    <td>
                      <%= row.nome_insegnamento %>
                    </td>
                    <td>
                      <%= row.cfu %>
                    </td>
                    <td>
                      <% var nome=row.nome_insegnamento.toUpperCase() 
                        if (nome !=='TESI' && nome !=='PROVA FINALE' &&
                            nome !=='TIROCINIO' ) { 
                            var index=docenti.map(doc=> {return doc.id}).indexOf(row.id_docente);
                            if(index != -1) { %> 
                              <%= docenti[index].nome + " " + docenti[index].cognome %>
                      <% } } %>
                    </td>
                    <td>
                      <%if (row.scelta) {%> Si <% } else {%> No <%}%>
                    </td>
                    <td>
                      <%if (row.scelta) {%>
                        <%=row.blocco%>
                          <% } %>
                    </td>
                    <td> <button class="btn">Scheda di Trasparenza</button> </td>
                  </tr>

                  <% }) %>
            </tbody>
            <tfoot>
              <tr class="table-dark"></tr>
            </tfoot>
          </table>
          <% } %>
            <% } %>
    </div>
  </div>
  <%- include('footer.ejs') %>